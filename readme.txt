=== Multibanco (IfthenPay gateway) for WooCommerce ===
Contributors: webdados, wonderm00n
Tags: woocommerce, payment, multibanco, ecommerce, e-commerce, ifthen, ifthen software, webdados, ifthenpay
Author URI: http://www.webdados.pt
Plugin URI: http://www.webdados.pt/produtos-e-servicos/internet/desenvolvimento-wordpress/multibanco-ifthen-software-gateway-woocommerce-wordpress/
Requires at least: 3.8
Tested up to: 4.2.2
Stable tag: 1.6.2

This plugin allows Portuguese costumers to pay WooCommerce orders with Multibanco (Pag. Serviços), using the IfthenPay gateway.

== Description ==

"Pagamento de Serviços" (service payment) on Multibanco (the Portuguese ATM network), or on Home Banking services, is the most popular way of paying services and (online) purchases in Portugal. The Portuguese consumer trusts in the "Multibanco" system more than any other.

This plugin will allow you to generate a payment Reference that the customer can then use to pay for his order on the ATM or Home Banking service. This plugin uses one of the several gateways/services available in Portugal, provided by IfthenPay, and a contract with this company is required.

This is NOT an official plugin by Ifthen, yet it has been tested with them and it's the most complete one available.

= Features: =

* Generates a Multibanco Reference for simple payment on the Portuguese ATM or Home Banking service network;
* Automaticaly changes the order status to "Processing (paid)" and notifies both the costumer and the store owner;
* Allows to search orders (on the admin area) by Reference;


== Installation ==

* Use the included automatic install feature on your WordPress admin panel and search for "Multibanco (IfthenPay gateway) for WooCommerce".
* Go to the WooCoomerce configuration area, payment methods and fill in the details provided by IfthenPay (Entity, Subentity) in order to be able to use this payment method.
* Make sure IfThen has activated "Callback" on their side with the URL provided on the configuration screen and a Anti-phishing key generated by you.

== Frequently Asked Questions ==

= Can I start receiving payments right away? Show me the money! =

Nop! You have to sign a contract with IfthenPay in order to activate this service. Go to [http://www.ifthenpay.com](http://www.ifthenpay.com) for more information

= IfthenPay says my callback URL is returning a 404 error. Should I sit in a corner and cry or is there a solution? =

Don't cry! There's a solution!
You probably have weird permalink settings on your WordPress installation.
Tell them to change the callback URL from `http://yourwebsite/wc-api/WC_Multibanco_IfThen_Webdados/?chave=[CHAVE_ANTI_PHISHING]&entidade=[ENTIDADE]&referencia=[REFERENCIA]&valor=[VALOR]` to `http://yourwebsite/?wc-api=WC_Multibanco_IfThen_Webdados&chave=[CHAVE_ANTI_PHISHING]&entidade=[ENTIDADE]&referencia=[REFERENCIA]&valor=[VALOR]`

= Can I change the payment instructions look and feel on the "Thank you" page and/or the new order email? =

Yes you can! But you have to know your way around WordPress filters. There are two filters to do this and you can find examples of them inside `filters_examples.php`

== Changelog ==

= 1.6.2 =
* WPML compatibility: You can now set the english title and description at the plugin's settings page and then go to WPML > String Translation to set the same for each language
* Fix: get_icon() throw a notice

= 1.6.1 =
* It's now possible to change the payment gateway icon html using the `woocommerce_gateway_icon` filter. See filters_examples.php
* Fix: Debug log path.
* Fix: `multibanco_ifthen_thankyou_instructions_table_html` filter example had an error
* Minor Portuguese translation tweaks.

= 1.6 =
* It's now possible to decide either to reduce stock when the payment is confirmed via callback (default) or when the order is placed by the client. On the first case you don't have to fix the stock if the order is never paid but you'll also not have the quantity reserved for this order. On the second case you'll have to manually fix the stock if the order is never paid.
* There's 2 filters that allow to change the payment instructions on both the "Thank you" page and on the client email. You can choose either to manipulate the default html or create your own. See filters_examples.php
* Minor Portuguese translation tweaks.

= 1.5.1 =
* Minor visual tweaks
* Fix: eliminated some notices and warnings

= 1.5 =
* It's now possible to enable this payment method only for orders bellow a specific amount
* Fix: No more values passed by reference, in order to avoid "deprecated" notices from PHP
* Fix: Bug on the option introduced on version 1.3

= 1.4.2 =
* Removed unused "add_meta_box" code

= 1.4.1 =
* Minor Multibanco logo improvements (thanks to Gumelo)
* Fix: Small bug when detecting multisite installs

= 1.4 =
* WordPress Multisite support

= 1.3 =
* It's now possible to enable this payment method only for orders above a specific amount

= 1.2 =
* Added the hability to receive callback logs on a email address
* Fixed "Order Status Emails for WooCommerce" plugin detection (soon to be released)
* Fixed "IfthenPay" link

= 1.1 =
* Changed plugin name and instructions to reflect the new company/gateway name "IfthenPay" instead of "Ifthen Software"
* Fix: Changed textdomain calls from a variable to a string
* Fix: Icon and banner url now uses "plugins_url" function instead of "WP_PLUGIN_URL" constant
* "Order Status Emails for WooCommerce" plugin integration (soon to be released)

= 1.0.1 =
* Fix: On some environments some labels were not being translated correctly
* Minor changes to allow to run upgrade tasks

= 1.0 =
* Initial release.